/**
 * Carbon.JS - A simple JavaScript framework
 *
 * Carbon.JS Utilities Module - Common functions
 *
 * @author		Dmitry Polyuhov <admin@carbonjs.com>
 * @license		http://carbonjs.com/mit-license.txt
 * @version		1.1.0 (build 20100306)
 */
CarbonJS.modules.utilities=true;CarbonJS.Browsers={IE:function(){return("\v"=="v")},FF:function(){return(navigator.userAgent.toLowerCase().indexOf("firefox")!=-1)},Opera:function(){return(navigator.userAgent.toLowerCase().indexOf("opera")!=-1)},Safari:function(){return(navigator.userAgent.toLowerCase().indexOf("safari")!=-1)}};CarbonJS.events=[];(function(){function b(){while(CarbonJS.events.length>0){Q(CarbonJS.events[0].obj).removeEvent(CarbonJS.events[0].evt)}}var a=window.onunload;if(typeof window.onunload!="function"){window.onunload=b}else{window.onunload=function(){a();b()}}})();CarbonJS.__displayCache={};CarbonJS.elemIsHidden=function(c){var b=c.offsetWidth,a=c.offsetHeight,d=c.nodeName.toLowerCase()==="tr";return b===0&&a===0&&!d?true:b>0&&a>0&&!d?false:Q(c).css("display")};CarbonJS.extend({attr:function(a){if(typeof a=="object"){this.forEach(function(){for(var b in a){this[b]=a[b]}});return this}else{if(typeof a=="string"){return this[0][a]}}},css:function(a){var b;if(typeof a=="object"){this.forEach(function(){for(n in a){b=n;if(n!="MozOpacity"&&n!="KhtmlOpacity"){n=n.replace(/\-(\w)/g,function(){return arguments[1].toUpperCase()})}if(n=="float"){this.style.styleFloat=a[b]}else{this.style[n]=a[b]}}});return this}else{if(typeof a=="string"){b=a;if(b!="MozOpacity"&&b!="KhtmlOpacity"){b=b.replace(/\-(\w)/g,function(){return arguments[1].toUpperCase()})}if(b=="float"){b="styleFloat"}if(window.getComputedStyle){return window.getComputedStyle(this[0],null)[b]}else{return this[0].currentStyle[b]}}}},transparence:function(b){var a="undefined";if(document.body.filters){a="filter"}else{if(typeof document.body.style.MozOpacity=="string"){a="MozOpacity"}else{if(typeof document.body.style.KhtmlOpacity=="string"){a="KhtmlOpacity"}else{if(typeof document.body.style.opacity=="string"){a="opacity"}}}}if(this.length==0){return a}else{if(b==null){if(a!="filter"){return parseInt(parseFloat(this.css(a))*100)}else{return parseInt(this.attr("transparence"))}}else{if(a!="filter"){if(a=="MozOpacity"){this.css({MozOpacity:parseInt(b)/100})}else{if(a=="KhtmlOpacity"){this.css({KhtmlOpacity:parseInt(b)/100})}else{if(a=="opacity"){this.css({opacity:parseInt(b)/100})}}}}else{this.css({filter:"progid:DXImageTransform.Microsoft.Alpha(opacity="+parseInt(b)+")"}).attr({transparence:parseInt(b)})}return this}}},addClass:function(a){this.forEach(function(){if(!(new RegExp("(^|\\s)"+a+"(\\s|$)").test(this.className))){this.className+=" "+a}});return this},removeClass:function(a){var b=new RegExp("(^|\\s)"+a+"(\\s|$)","g");this.forEach(function(){this.className=this.className.replace(b,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")});return this},show:function(){this.forEach(function(){var d=Q(this);var b=d.attr("displayOld");d.css({display:b||""});if(d.css("display")==="none"){var f=this.nodeName,a=document.body,e;if(CarbonJS.__displayCache[f]){e=CarbonJS.__displayCache[f]}else{var c=document.createElement(f);a.appendChild(c);e=Q(c).css("display");if(e=="none"){e="block"}a.removeChild(c);CarbonJS.__displayCache[f]=e}d.attr({displayOld:e});d.css({display:e})}});return this},hide:function(){this.forEach(function(){var a=Q(this);if(!a.attr("displayOld")){a.attr({displayOld:a.css("display")})}a.css({display:"none"})});return this},toggle:function(){this.forEach(function(){CarbonJS.elemIsHidden(this)?Q(this).show():Q(this).hide()});return this},x:function(d){if(this.length==0){var a;d=d||window.event;if(d.pageX){a=d.pageX}else{a=d.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)-document.documentElement.clientLeft}return parseInt(a)}else{if(d!=null){if(this.css("position")!="absolute"){this.css({position:"absolute"})}this.css({left:parseInt(d)+"px"});return this}else{if(this[0].getBoundingClientRect){return(this[0].getBoundingClientRect().left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft)-(document.documentElement.clientLeft||document.body.clientLeft||0))}else{var c=this[0].offsetLeft,b=this[0].offsetParent;while(b=b.offsetParent){c+=b.offsetLeft-b.scrollLeft}return parseInt(c)}}}},y:function(c){if(this.length==0){var d;c=c||window.event;if(c.pageY){d=c.pageY}else{d=c.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-document.documentElement.clientTop}return parseInt(d)}else{if(c!=null){this.css("position")!="absolute"?this.css({position:"absolute"}):"";this.css({top:parseInt(c)+"px"});return this}else{if(this[0].getBoundingClientRect){return(this[0].getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-(document.documentElement.clientTop||document.body.clientTop||0))}else{var b=this[0].offsetTop,a=this[0].offsetParent;while(a=a.offsetParent){b+=a.offsetTop-a.scrollTop}return parseInt(b)}}}},addEvent:function(b,a){this.forEach(function(){if(this.addEventListener){this.addEventListener(b,a,false)}else{if(this.attachEvent){this.attachEvent("on"+b,a)}else{var c=this["on"+b];if(c){this["on"+b]=function(){c();a()}}else{this["on"+b]=a}}}CarbonJS.events.push({obj:this,evt:b,func:a})});return this},removeEvent:function(a){this.forEach(function(){var b=-1;while(++b<CarbonJS.events.length){if(CarbonJS.events[b].obj==this&&CarbonJS.events[b].evt==a){if(this.removeEventListener){this.removeEventListener(a,CarbonJS.events[b].func,false)}else{if(this.detachEvent){this.detachEvent("on"+a,CarbonJS.events[b].func)}else{this["on"+a]=""}}CarbonJS.events.splice(b,1);break}}});return this}});CarbonJS.setCookie=function(d,e,f){f=f||{};var b=f.expires,a=d+"="+encodeURIComponent(e);if(b){if(typeof b=="number"){var c=new Date();c.setTime(c.getTime()+b);b=c}if(b.toUTCString){b=b.toUTCString()}f.expires=b}for(var g in f){a+="; "+g+((f[g].length!=0)?("="+f[g]):"")}document.cookie=a};CarbonJS.getCookie=function(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):undefined};CarbonJS.removeCookie=function(a){CarbonJS.setCookie(a,null,{expires:-1})};